(()=>{"use strict";window.addEventListener("click", () => console.log(10));function t(t){function a(t,e){const a=document.createElement("div");return a.innerHTML=e,t&&a.classList.add("valid-feedback"),t||a.classList.add("invalid-feedback"),a}let r=!0;return t.forEach((t=>{switch(t.getAttribute("data-type")){case"label":t.value.trim().length<1?(t.after(a(!1,"Please, enter a valid name")),r=!1):t.after(a(!0,"Looks good!"));break;case"x":moment(e(t.value),"DD/MM/YY").isValid()?t.after(a(!0,"Looks good!")):(t.after(a(!1,"Please, enter a valid date")),r=!1);break;case"y":t.value<.1||t.value>1e4?(t.after(a(!1,"Please, enter a valid price")),r=!1):t.after(a(!0,"Looks good!"))}})),r}function e(t){return t.split("-").reverse().join("/")}function a(t,e){t.data.datasets=t.data.datasets.filter((t=>t.data.length>0)),e.innerHTML="",t.data.datasets.forEach(((a,n)=>{e.innerHTML+=function(t,e){let a="";return t.data.datasets[e].data.forEach(((n,d)=>{a+=`<tr style="color: ${t.data.datasets[e].borderColor}">\n            <td class="table_item center" scope="row" width="10">${e+1}</td>\n            <td class="table_item center" width="30%"><input class="center" data-type=label data-dataset=${e} data-rowindex=${d} contenteditable="true" type='text' value="${t.data.datasets[e].label}"></input></td>\n            <td class="table_item center" width=30%><input class="center" data-type=x data-dataset=${e} data-rowindex=${d} contenteditable="true" type='date' value="${r(n.x)}"></input></td>\n            <td class="table_item center" width="30%"><input class="center" data-type=y data-dataset=${e} data-rowindex=${d} contenteditable="true" type='number' value="${r(n.y)}"></input></td>\n            <td class="table_item center" width="7%">\n                <div class="btn-group dropstart">\n                    <i class="bi bi-three-dots-vertical dots" type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">\n                    </i>\n                    <ul class="dropdown-menu">\n                    <li><a class="dropdown-item" href="#"><i class="bi bi-trash" data-cellIndex=${e} data-trashIndex=${d} data-table_delete></i></a></li>\n                    </ul>\n                </div>\n            </td>\n            </tr>`})),a}(t,n)}))}function r(t){return t.split("/").reverse().join("-")}function n(t){t.classList.remove("show"),document.body.style.overflow=""}function d(t,e){const a=document.querySelector(e);a.innerHTML="",[...new Set(t.data.datasets)].forEach((t=>a.innerHTML+=`<option value=${t.label}>`)),document.querySelectorAll(".modal_input").forEach((t=>t.value="")),[...document.querySelectorAll(".invalid-feedback"),...document.querySelectorAll(".valid-feedback")].forEach((t=>t.remove()))}const o=new Chart(document.getElementById("myChart"),{type:"line",options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:0,title:{display:!0,text:"Chart.js Time Scale"},scales:{x:{type:"time",time:{parser:"DD/MM/YYYY",tooltipFormat:"ll",minUnit:"day",displayFormats:{quarter:"MMM YYYY"}},ticks:{align:"center",crossAlign:"center",padding:10}},y:{ticks:{align:"center",crossAlign:"center",padding:10},beginAtZero:!0}},plugins:{legend:{labels:{font:{size:20}}}}},data:{datasets:[]}});!function({chart:t,openTrigger:e,closeTrigger:a,modalS:r,dataListS:o}){const l=document.querySelector(r);document.querySelector(e).addEventListener("click",(()=>{!function(t){t.classList.toggle("show")}(l)})),console.log(document.querySelectorAll(a)),document.querySelectorAll(a).forEach((t=>t.addEventListener("click",(()=>{n(l)})))),l.addEventListener("click",(e=>{e.target!==l&&""!==e.target.getAttribute("data-modal_close")||(n(l),d(t,o))})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&n(l)}))}({chart:o,openTrigger:".header_btn",closeTrigger:"[data-modal_close]",modalS:".modal",dataListS:"#datalistOptions"}),function({chart:t,nameS:e,dateS:a,priceS:r,newDataTriggerS:n,saveTriggerS:d,parentS:o,sortFunction:l,colorFunction:s,renderFunction:i,validator:c,modalClose:u,modalS:m,clearModal:g,dataList:p}){const y=document.querySelector(e),S=document.querySelector(a),b=document.querySelector(r),h=document.querySelector(n),f=document.querySelector(d),v=document.querySelector(o),q=document.querySelector(".notification");function L(t,e,a){t.data.datasets[e].data.splice(a,1),t.data.datasets[e].data.sort(l)}h.addEventListener("click",(()=>{if(c([y,S,b])){let e=!1;t.data.datasets.forEach(((a,r)=>{a.label===y.value&&(e=!0,function(t,e,a,r){const n={x:a,y:e};t.data.datasets[r].data.push(n),t.data.datasets[r].data.sort(l),t.update()}(t,b.value,moment(S.value).format("DD/MM/YYYY"),r),i(t,v,L))})),0==e&&(function(t,e,a,r){const n={label:e,data:[{x:r,y:a}],borderColor:s(),fill:!1,borderWidth:3};t.data.datasets.push(n),t.update()}(t,y.value,b.value,moment(S.value).format("DD/MM/YYYY")),i(t,v,L)),t.data.datasets.length>0&&q&&q.remove(),u(document.querySelector(m)),g(t,p),localStorage.setItem("dataSets",JSON.stringify(t.data.datasets))}})),f.addEventListener("click",(()=>{localStorage.setItem("dataSets",JSON.stringify(t.data.datasets)),t.update()})),document.querySelector("tbody").addEventListener("click",(e=>{""===e.target.getAttribute("data-table_delete")&&(L(t,+e.target.getAttribute("data-cellIndex"),+e.target.getAttribute("data-trashIndex")),i(t,document.querySelector(".table_body")),t.update())}))}({chart:o,nameS:"#name",dateS:"#date",priceS:"#price",newDataTriggerS:"[data-modal_new]",saveTriggerS:".editing_btn",parentS:"#table",sortFunction:function(t,e){let a=moment(t.x,"DD/MM/YYYY").valueOf(),r=moment(e.x,"DD/MM/YYYY").valueOf();return a<r?-1:a>r?1:0},colorFunction:function(){for(var t="0123456789ABCDEF".split(""),e="#",a=0;a<6;a++)e+=t[Math.floor(16*Math.random())];return e},renderFunction:a,validator:t,modalClose:n,modalS:".modal",clearModal:d,dataList:"#datalistOptions"}),o.data.datasets=JSON.parse(localStorage.getItem("dataSets"))||o.data.datasets,[...new Set(o.data.datasets)].forEach((t=>document.querySelector("#datalistOptions").innerHTML+=`<option value=${t.label}>`)),0===o.data.datasets.length&&(document.querySelector(".main_table").innerHTML+='<div class="notification">There is currently no data in the table</div>'),o.update(),a(o,document.querySelector(".table_body")),document.querySelector(".editing_btn").addEventListener("click",(()=>{localStorage.setItem("dataSets",JSON.stringify(o.data.datasets)),o.update()})),document.querySelector("#table").addEventListener("input",(a=>{d(o,"#datalistOptions"),"true"!==a.target.getAttribute("contenteditable")&&"INPUT"!==a.target.nodeName||!t([a.target])||function(t,e,a,r,n){"label"===e?t.data.datasets[r][e]=a:t.data.datasets[r].data[n][e]=a}(o,a.target.getAttribute("data-type"),a.target.innerHTML||e(a.target.value),+a.target.getAttribute("data-dataset"),+a.target.getAttribute("data-rowindex"))})),document.querySelectorAll(".cell-sortable").forEach((t=>{t.addEventListener("click",(()=>{!function(t,e,a=!0){const r=a?1:-1,n=t.tBodies[0],d=Array.from(n.querySelectorAll("tr")).sort(((t,a)=>t.querySelector(`td:nth-child(${e+1})`).textContent.trim()+t.querySelector("input").value.trim()>a.querySelector(`td:nth-child(${e+1})`).textContent.trim()+a.querySelector("input").value.trim()?1*r:-1*r));for(;n.firstChild;)n.removeChild(n.firstChild);n.append(...d),t.querySelectorAll("th").forEach((t=>t.classList.remove("th-sort-asc","th-sort-desc"))),t.querySelector(`th:nth-child(${e+1})`).classList.toggle("th-sort-asc",a),t.querySelector(`th:nth-child(${e+1})`).classList.toggle("th-sort-desc",!a)}(document.querySelector("#table"),Array.prototype.indexOf.call(t.parentElement.children,t),!t.classList.contains("th-sort-asc"))}))}))})();
//# sourceMappingURL=bundle.js.map
